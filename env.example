# Server Configuration
NODE_ENV=development
PORT=5000
FRONTEND_URL=http://localhost:3000

# Database
MONGODB_URI=mongodb://localhost:27017/localpro-super-app


# JWT
JWT_SECRET=your-super-secret-jwt-key-here

# Twilio Configuration
TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_AUTH_TOKEN=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_VERIFY_SERVICE_SID=VAxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_PHONE_NUMBER=+1234567890

# Payment Gateway (Stripe/PayPal/etc.)
STRIPE_SECRET_KEY=your-stripe-secret-key
STRIPE_PUBLISHABLE_KEY=your-stripe-publishable-key

# PayPal Configuration
PAYPAL_CLIENT_ID=your-paypal-client-id
PAYPAL_CLIENT_SECRET=your-paypal-client-secret
PAYPAL_MODE=sandbox
PAYPAL_WEBHOOK_ID=your-paypal-webhook-id

# PayMaya Configuration
PAYMAYA_PUBLIC_KEY=your-paymaya-public-key
PAYMAYA_SECRET_KEY=your-paymaya-secret-key
PAYMAYA_MODE=sandbox
PAYMAYA_WEBHOOK_SECRET=your-paymaya-webhook-secret

# Email Service Configuration
# Option 1: Resend (Recommended - Modern API)
RESEND_API_KEY=re_xxxxxxxxx
FROM_EMAIL=noreply@yourdomain.com

# Option 2: SendGrid (API-based)
SENDGRID_API_KEY=your-sendgrid-api-key

# Option 3: Hostinger SMTP (SMTP-based)
SMTP_HOST=smtp.hostinger.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@yourdomain.com
SMTP_PASS=your-email-password

# Email Settings
EMAIL_SERVICE=resend

# File Upload - Cloudinary Configuration
CLOUDINARY_CLOUD_NAME=your-cloudinary-cloud-name
CLOUDINARY_API_KEY=your-cloudinary-api-key
CLOUDINARY_API_SECRET=your-cloudinary-api-secret

# File Upload (AWS S3 - Alternative)
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_BUCKET_NAME=your-s3-bucket-name
AWS_REGION=us-east-1

# External APIs
GOOGLE_MAPS_API_KEY=your-google-maps-api-key
GOOGLE_MAPS_GEOCODING_API_KEY=your-google-maps-geocoding-api-key
GOOGLE_MAPS_PLACES_API_KEY=your-google-maps-places-api-key
GOOGLE_MAPS_DISTANCE_MATRIX_API_KEY=your-google-maps-distance-matrix-api-key
FINANCIAL_API_KEY=your-financial-api-key

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Logging Configuration
LOG_LEVEL=info
LOG_FILE_MAX_SIZE=20m
LOG_FILE_MAX_FILES=14d
LOG_HTTP_REQUESTS=true
LOG_SLOW_REQUESTS_THRESHOLD=2000
LOG_BATCH_SIZE=100
LOG_FLUSH_INTERVAL=5000
LOG_DATABASE_ENABLED=true

# Error Monitoring
ERROR_MONITORING_ENABLED=true
ERROR_ALERT_THRESHOLDS_CRITICAL=1
ERROR_ALERT_THRESHOLDS_HIGH=5
ERROR_ALERT_THRESHOLDS_MEDIUM=10
ERROR_ALERT_THRESHOLDS_LOW=20

# Performance Alert Monitoring (optional)
# If ENABLE_ALERT_MONITORING=false, the background alert checker will not run
ENABLE_ALERT_MONITORING=true
# Check interval for background monitoring (default: 60000 = 1 minute)
ALERT_CHECK_INTERVAL_MS=60000
# Dedupe window to avoid logging the same alert every minute (default: 10 minutes)
ALERT_DEDUP_WINDOW_MS=600000
# Heap usage ratio threshold (heapUsed/heapTotal). NOTE: this is not system RAM.
ALERT_HEAP_USAGE_RATIO=0.9
# Only warn on heap ratio once heapTotal is at least this many MB (reduces noise)
ALERT_HEAP_MIN_TOTAL_MB=128
# Optional: alert if Node process RSS exceeds this many MB (0 disables)
ALERT_RSS_MB=0
# Optional: alert if system memory usage exceeds this percent (0 disables)
ALERT_SYSTEM_MEMORY_PERCENT=0
# CPU usage percent threshold
ALERT_CPU_PERCENT=80
# Active connection threshold
ALERT_ACTIVE_CONNECTIONS=1000
# Error rate per minute threshold
ALERT_ERROR_RATE_PER_MIN=10
# Response time threshold in ms
ALERT_RESPONSE_TIME_MS=5000

# External Monitoring Services (Optional)
# SENTRY_DSN=your-sentry-dsn-here
# SLACK_WEBHOOK_URL=your-slack-webhook-url
# DISCORD_WEBHOOK_URL=your-discord-webhook-url

# Audit Logging Configuration
AUDIT_LOGGING_ENABLED=true
AUDIT_RETENTION_DAYS=2555
AUDIT_LOG_SENSITIVE_DATA=false
AUDIT_LOG_REQUEST_BODY=false
AUDIT_LOG_RESPONSE_BODY=false
AUDIT_AUTO_CLEANUP=true
AUDIT_CLEANUP_SCHEDULE=0 2 * * *

# Automated Services Configuration
# Enable automated database backups (set to 'true' to enable)
ENABLE_AUTOMATED_BACKUPS=true
# Backup retention periods
BACKUP_RETENTION_DAYS=7
BACKUP_RETENTION_WEEKS=4
BACKUP_RETENTION_MONTHS=12
# Upload backups to cloud storage (AWS S3, GCS, etc.)
BACKUP_UPLOAD_TO_CLOUD=false

# Automated Log Cleanup
ENABLE_AUTOMATED_CLEANUP=true
LOG_CLEANUP_SCHEDULE=0 2 * * *
LOG_RETENTION_DAYS=30
ERROR_LOG_RETENTION_DAYS=90
HTTP_LOG_RETENTION_DAYS=14
DB_LOG_RETENTION_DAYS=30

# Automated Payment Sync (PayPal / PayMongo)
ENABLE_AUTOMATED_PAYMENT_SYNC=false
PAYMENT_SYNC_SCHEDULE=0 * * * *
PAYMENT_SYNC_MAX_CONCURRENCY=5
PAYMENT_SYNC_ON_STARTUP=false

# Automated Lifecycle Marketing (opt-in)
ENABLE_AUTOMATED_MARKETING=false
# Enable the re-engagement automation
ENABLE_AUTOMATED_MARKETING_REENGAGEMENT=false
# Daily schedule (cron) for re-engagement campaigns
MARKETING_REENGAGEMENT_SCHEDULE=15 10 * * *
# User inactivity threshold (days)
MARKETING_INACTIVE_DAYS=30
# Cooldown between re-engagement sends per subscriber (days)
MARKETING_REENGAGEMENT_COOLDOWN_DAYS=14
# Max recipients per run
MARKETING_REENGAGEMENT_DAILY_LIMIT=200
# Optional subject override
MARKETING_REENGAGEMENT_SUBJECT=We miss you — new opportunities on LocalPro

# Weekly digest automation (opt-in)
ENABLE_AUTOMATED_MARKETING_WEEKLY_DIGEST=false
MARKETING_WEEKLY_DIGEST_SCHEDULE=0 9 * * 1
MARKETING_WEEKLY_DIGEST_COOLDOWN_DAYS=6
MARKETING_WEEKLY_DIGEST_DAILY_LIMIT=500
MARKETING_WEEKLY_DIGEST_SUBJECT=Your Weekly Digest — LocalPro

# Welcome series follow-ups (opt-in via UserSettings.notifications.email.systemUpdates)
ENABLE_AUTOMATED_MARKETING_WELCOME_SERIES=false
MARKETING_WELCOME_SERIES_SCHEDULE=30 11 * * *
MARKETING_WELCOME_SERIES_DAILY_LIMIT=300
MARKETING_WELCOME_SERIES_COOLDOWN_DAYS=30
MARKETING_WELCOME_DAY2_SUBJECT=Quick tips to get the most from LocalPro
MARKETING_WELCOME_DAY7_SUBJECT=Your first week on LocalPro — what to try next

# Abandoned booking/payment nudges (opt-in via UserSettings.notifications.email.bookingUpdates)
ENABLE_AUTOMATED_MARKETING_ABANDONED_BOOKING=false
MARKETING_ABANDONED_BOOKING_SCHEDULE=0 */2 * * *
MARKETING_ABANDONED_BOOKING_MIN_AGE_MINUTES=60
MARKETING_ABANDONED_BOOKING_MAX_AGE_DAYS=7
MARKETING_ABANDONED_BOOKING_LIMIT=200
MARKETING_ABANDONED_BOOKING_COOLDOWN_DAYS=3
MARKETING_ABANDONED_BOOKING_SUBJECT=Complete your booking — it only takes a minute

# Referral nudges (opt-in via UserSettings.notifications.email.referralUpdates)
ENABLE_AUTOMATED_MARKETING_REFERRAL_NUDGE=false
MARKETING_REFERRAL_NUDGE_SCHEDULE=0 13 * * *
MARKETING_REFERRAL_MIN_ACCOUNT_AGE_DAYS=14
MARKETING_REFERRAL_NUDGE_DAILY_LIMIT=200
MARKETING_REFERRAL_NUDGE_COOLDOWN_DAYS=14
MARKETING_REFERRAL_NUDGE_SUBJECT=Invite friends & earn rewards on LocalPro

# Provider activation (opt-in via UserSettings.notifications.email.systemUpdates)
ENABLE_AUTOMATED_MARKETING_PROVIDER_ACTIVATION=false
MARKETING_PROVIDER_ACTIVATION_SCHEDULE=30 13 * * *
MARKETING_PROVIDER_ACTIVATION_MIN_ACCOUNT_AGE_DAYS=7
MARKETING_PROVIDER_ACTIVATION_DAILY_LIMIT=200
MARKETING_PROVIDER_ACTIVATION_COOLDOWN_DAYS=14
MARKETING_PROVIDER_ACTIVATION_SUBJECT=Publish your first service on LocalPro

# Churn prevention (opt-in via UserSettings.notifications.email.paymentUpdates)
ENABLE_AUTOMATED_MARKETING_CHURN_PREVENTION=false
MARKETING_CHURN_PREVENTION_SCHEDULE=0 14 * * *
MARKETING_CHURN_DAYS_BEFORE=3
MARKETING_CHURN_DAILY_LIMIT=200
MARKETING_CHURN_COOLDOWN_DAYS=7
MARKETING_CHURN_SUBJECT=Your subscription is ending soon — keep your benefits

# Automated Messaging Nudges (unread message reminders)
ENABLE_AUTOMATED_MESSAGE_NUDGES=false
MESSAGE_NUDGE_SCHEDULE=*/30 * * * *
MESSAGE_NUDGE_MIN_AGE_MINUTES=60
MESSAGE_NUDGE_DEDUP_MINUTES=360
MESSAGE_NUDGE_MAX_CONVERSATIONS=200
MESSAGE_NUDGE_MAX_NOTIFICATIONS=500

# Automated Orders Automations (Supplies)
ENABLE_AUTOMATED_ORDERS_AUTOMATIONS=false
ENABLE_AUTOMATED_ORDER_ABANDONED_PAYMENT=false
ORDER_ABANDONED_PAYMENT_SCHEDULE=0 */2 * * *
ORDER_ABANDONED_MIN_AGE_MINUTES=60
ORDER_ABANDONED_MAX_AGE_DAYS=7
ORDER_ABANDONED_LIMIT=200
ORDER_ABANDONED_DEDUP_HOURS=24

ENABLE_AUTOMATED_ORDER_SLA_ALERTS=false
ORDER_SLA_SCHEDULE=15 9 * * *
ORDER_PROCESSING_SLA_DAYS=3
ORDER_SLA_LIMIT=200
ORDER_SLA_DEDUP_HOURS=24
ORDER_SLA_NOTIFY_ADMINS=false

# Automated Finance Reminders (Loans / Salary Advance)
ENABLE_AUTOMATED_FINANCE_REMINDERS=false
FINANCE_REMINDER_SCHEDULE=0 10 * * *
FINANCE_REMINDER_DAYS_BEFORE=3
FINANCE_REMINDER_DEDUP_HOURS=24
FINANCE_REMINDER_LOAN_LIMIT=300
FINANCE_REMINDER_ADVANCE_LIMIT=300

# Automated Rental Reminders
ENABLE_AUTOMATED_RENTAL_REMINDERS=false
RENTAL_REMINDER_SCHEDULE=0 9 * * *
RENTAL_DUE_SOON_DAYS_BEFORE=1
RENTAL_REMINDER_DEDUP_HOURS=24
RENTAL_REMINDER_LIMIT=300
RENTAL_REMINDER_NOTIFY_OWNER=false

# Automated Job Board Digest
ENABLE_AUTOMATED_JOB_DIGEST=false
JOB_DIGEST_SCHEDULE=0 9 * * 1
JOB_DIGEST_LOOKBACK_DAYS=7
JOB_DIGEST_DEDUP_DAYS=6
JOB_DIGEST_MAX_USERS=1000

# Automated Academy Engagement
ENABLE_AUTOMATED_ACADEMY_ENGAGEMENT=false
ACADEMY_ENGAGEMENT_SCHEDULE=30 9 * * *
ACADEMY_NOT_STARTED_DAYS=3
ACADEMY_STALLED_DAYS=5
ACADEMY_ENGAGEMENT_LIMIT=300
ACADEMY_ENGAGEMENT_DEDUP_DAYS=3

# Automated Live Chat SLA Alerts
ENABLE_AUTOMATED_LIVECHAT_SLA=false
LIVECHAT_SLA_SCHEDULE=*/5 * * * *
LIVECHAT_SLA_WAIT_MINUTES=10
LIVECHAT_SLA_LIMIT=50
LIVECHAT_SLA_DEDUP_MINUTES=30

# Marketplace Booking Follow-ups (extra nudges)
ENABLE_AUTOMATED_BOOKING_FOLLOWUPS=false
BOOKING_FOLLOWUP_SCHEDULE=*/30 * * * *
BOOKING_PENDING_CONFIRMATION_HOURS=2
BOOKING_SOON_HOURS=24
BOOKING_FOLLOWUP_DEDUP_MINUTES=360
BOOKING_FOLLOWUP_LIMIT=300

# Supplies Fulfillment / Delivery Confirmation
ENABLE_AUTOMATED_SUPPLIES_FULFILLMENT=false
ENABLE_AUTOMATED_SUPPLIES_DELIVERY_CONFIRMATION=false
SUPPLIES_DELIVERY_CONFIRMATION_SCHEDULE=0 */6 * * *
SUPPLIES_DELIVERY_DEDUP_HOURS=24
SUPPLIES_DELIVERY_MAX_SHIPPED_DAYS=14
SUPPLIES_DELIVERY_LIMIT=300
ENABLE_AUTOMATED_SUPPLIES_LATE_DELIVERY_ALERTS=false
SUPPLIES_LATE_DELIVERY_SCHEDULE=30 9 * * *
SUPPLIES_LATE_DELIVERY_DAYS=7
SUPPLIES_LATE_DELIVERY_DEDUP_HOURS=24
SUPPLIES_LATE_DELIVERY_LIMIT=200

# Academy Certificates (admin alerts)
ENABLE_AUTOMATED_ACADEMY_CERTIFICATES=false
ACADEMY_CERTIFICATE_SCHEDULE=0 11 * * *
ACADEMY_CERTIFICATE_DEDUP_HOURS=24
ACADEMY_CERTIFICATE_LIMIT=200
ACADEMY_CERTIFICATE_MIN_COMPLETED_DAYS=0

# Job Application Follow-ups
ENABLE_AUTOMATED_JOB_APPLICATION_FOLLOWUPS=false
JOB_APPLICATION_FOLLOWUP_SCHEDULE=0 10 * * *
JOB_APPLICATION_PENDING_DAYS=7
JOB_APPLICATION_FOLLOWUP_DEDUP_HOURS=24
JOB_APPLICATION_FOLLOWUP_LIMIT=300

# Escrow Dispute Escalation
ENABLE_AUTOMATED_ESCROW_DISPUTE_ESCALATIONS=false
ESCROW_DISPUTE_ADMIN_SCHEDULE=0 */6 * * *
ESCROW_DISPUTE_PARTY_SCHEDULE=*/30 * * * *
ESCROW_DISPUTE_ADMIN_UNRESOLVED_DAYS=3
ESCROW_DISPUTE_ADMIN_DEDUP_HOURS=24
ESCROW_DISPUTE_ADMIN_LIMIT=200
ESCROW_DISPUTE_PARTY_EVIDENCE_AFTER_HOURS=6
ESCROW_DISPUTE_PARTY_DEDUP_HOURS=24
ESCROW_DISPUTE_PARTY_LIMIT=200

# Supplies Auto-Deliver (optional - enables automatic state changes)
ENABLE_AUTOMATED_SUPPLIES_AUTO_DELIVER=false
SUPPLIES_AUTO_DELIVER_SCHEDULE=0 3 * * *
SUPPLIES_AUTO_DELIVER_AFTER_DAYS=10
SUPPLIES_AUTO_DELIVER_LIMIT=200

# Referral Tier Milestones
ENABLE_AUTOMATED_REFERRAL_TIER_MILESTONES=false
REFERRAL_TIER_SCHEDULE=0 12 * * *
REFERRAL_TIER_LOOKBACK_DAYS=2
REFERRAL_TIER_DEDUP_DAYS=30
REFERRAL_TIER_LIMIT=500

# Marketplace No-Show / Overdue Booking Detection
ENABLE_AUTOMATED_BOOKING_NO_SHOW=false
BOOKING_NO_SHOW_SCHEDULE=*/30 * * * *
BOOKING_NO_SHOW_GRACE_MINUTES=120
BOOKING_NO_SHOW_DEDUP_HOURS=24
BOOKING_NO_SHOW_LIMIT=200
BOOKING_NO_SHOW_LOOKBACK_HOURS=72
BOOKING_NO_SHOW_NOTIFY_ADMINS=false

# Supplies Reorder Reminders
ENABLE_AUTOMATED_SUPPLIES_REORDER_REMINDERS=false
SUPPLIES_REORDER_SCHEDULE=0 9 * * 1
SUPPLIES_REORDER_DAYS_SINCE_LAST=30
SUPPLIES_REORDER_DEDUP_DAYS=14
SUPPLIES_REORDER_LIMIT=500

# Messaging Moderation (flag contact leakage)
ENABLE_AUTOMATED_MESSAGE_MODERATION=false
MESSAGE_MODERATION_SCHEDULE=*/10 * * * *
MESSAGE_MODERATION_LOOKBACK_MINUTES=15
MESSAGE_MODERATION_DEDUP_HOURS=24
MESSAGE_MODERATION_LIMIT=500
MESSAGE_MODERATION_WARN_SENDER=false

# LocalPro Plus Dunning Reminders
ENABLE_AUTOMATED_SUBSCRIPTION_DUNNING=false
SUBSCRIPTION_DUNNING_SCHEDULE=0 11 * * *
SUBSCRIPTION_DUNNING_LOOKBACK_DAYS=14
SUBSCRIPTION_DUNNING_REMIND_DAYS=1,3,7
SUBSCRIPTION_DUNNING_DEDUP_HOURS=24
SUBSCRIPTION_DUNNING_LIMIT=300

# Mobile-first Lifecycle Notifications (Option A: push/in-app)
ENABLE_AUTOMATED_MOBILE_LIFECYCLE=false

ENABLE_MOBILE_REENGAGEMENT=false
MOBILE_REENGAGEMENT_SCHEDULE=20 10 * * *
MOBILE_INACTIVE_DAYS=30
MOBILE_REENGAGEMENT_COOLDOWN_DAYS=14
MOBILE_REENGAGEMENT_DAILY_LIMIT=500

ENABLE_MOBILE_WEEKLY_DIGEST=false
MOBILE_WEEKLY_DIGEST_SCHEDULE=0 9 * * 1
MOBILE_WEEKLY_DIGEST_DEDUP_DAYS=6
MOBILE_WEEKLY_DIGEST_MAX_USERS=2000

ENABLE_MOBILE_WELCOME_FOLLOWUPS=false
MOBILE_WELCOME_SERIES_SCHEDULE=40 11 * * *
MOBILE_WELCOME_FOLLOWUPS_DAILY_LIMIT=1000
MOBILE_WELCOME_FOLLOWUPS_DEDUP_DAYS=30

ENABLE_MOBILE_REFERRAL_NUDGES=false
MOBILE_REFERRAL_NUDGE_SCHEDULE=10 13 * * *
MOBILE_REFERRAL_MIN_ACCOUNT_AGE_DAYS=14
MOBILE_REFERRAL_DEDUP_DAYS=14
MOBILE_REFERRAL_LIMIT=500

ENABLE_MOBILE_PROVIDER_ACTIVATION=false
MOBILE_PROVIDER_ACTIVATION_SCHEDULE=40 13 * * *
MOBILE_PROVIDER_MIN_ACCOUNT_AGE_DAYS=7
MOBILE_PROVIDER_DEDUP_DAYS=14
MOBILE_PROVIDER_LIMIT=300

ENABLE_MOBILE_SUBSCRIPTION_EXPIRING_SOON=false
MOBILE_SUBSCRIPTION_EXPIRING_SCHEDULE=0 14 * * *
MOBILE_SUBSCRIPTION_DAYS_BEFORE=3
MOBILE_SUBSCRIPTION_DEDUP_DAYS=7
MOBILE_SUBSCRIPTION_LIMIT=500

# Database Index Management
VALIDATE_INDEXES_ON_STARTUP=true
ENABLE_AUTOMATED_INDEXES=false
INDEX_MAINTENANCE_SCHEDULE=0 4 * * *
# If true, also runs scripts/create-slow-query-indexes.js during index maintenance
ENABLE_SLOW_QUERY_INDEXES=false

# AI Bot Service (AI Operating System)
ENABLE_AI_BOT=true

# n8n Integration
N8N_BASE_URL=http://localhost:5678
N8N_WEBHOOK_URL=http://localhost:5678
N8N_WEBHOOK_PATH=/webhook
N8N_API_KEY=your-n8n-api-key-here